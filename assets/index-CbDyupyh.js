(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const k of r.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&c(k)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const S=document.getElementById("timer"),u=document.getElementById("start"),B=document.getElementById("reset"),b=document.getElementById("customWork");let a="work";f();m();document.body.classList.remove("break");let g=0;const h="/PomoBuild/",L=new Audio(`${h}sounds/alarm.mp3`);L.loop=!1;let y={standard:{work:25,short:5,long:15},deepwork:{work:50,short:10,long:30},micro:{work:15,short:2,long:10},custom:{work:25,short:5,long:15}};const E=document.querySelector(".custom-panel"),I=document.getElementById("customOk");function A(){clearInterval(v),d=!1,u.textContent="â–¶",document.body.classList.remove("running")}function m(){const e=a==="shortBreak"||a==="longBreak";document.body.dataset.phase=e?"break":"work"}const i={rain:new Audio(`${h}sounds/Rain.mp3`),cafe:new Audio(`${h}sounds/Cafe.mp3`),train:new Audio(`${h}sounds/Train.mp3`),typing:new Audio(`${h}sounds/Typing.mp3`)};Object.values(i).forEach(e=>{e.loop=!0,e.volume=0});document.querySelectorAll(".vol").forEach(e=>{e.addEventListener("input",()=>{const t=e.dataset.sound,n=i[t];if(!n)return;const c=Number(e.value)/100;n.volume=c;const o=document.querySelector(`[data-pct="${t}"]`);o&&(o.textContent=`${Math.round(c*100)}%`),c>0?n.play().catch(()=>{}):(n.pause(),n.currentTime=0)})});window.addEventListener("pointerdown",()=>{Object.values(i).forEach(e=>e.play().then(()=>e.pause()).catch(()=>{}))},{once:!0});document.querySelector('button[data-preset="custom"]')?.addEventListener("click",()=>{E?.classList.remove("hidden")});I?.addEventListener("click",()=>{const e=parseFloat(document.getElementById("customWork").value),t=parseFloat(document.getElementById("customShort").value),n=parseFloat(document.getElementById("customLong").value);e>0&&t>0&&n>0&&(y.custom={work:e,short:t,long:n},E?.classList.add("hidden"),A(),l="custom",a="work",m(),g=0,s=e*60,p(),typeof f=="function"&&f(),u.click())});let s=y.standard,v=null,d=!1;function p(){const e=String(Math.floor(s/60)).padStart(2,"0"),t=String(s%60).padStart(2,"0");S.textContent=`${e}:${t}`}function w(){document.body.setAttribute("data-phase",a)}function f(){const e=document.getElementById("phaseLabel");e&&(e.textContent=a==="work"?"":"Break!")}function q(){let e=0;const t=()=>{L.currentTime=0,L.play().catch(()=>{}),e++,e<3&&setTimeout(t,700)};t()}u.onclick=()=>{if(d){clearInterval(v),d=!1,u.textContent="â–¶",document.body.classList.remove("running");return}d=!0,document.body.classList.add("running"),window.innerWidth<700&&document.querySelector(".timer-ring").scrollIntoView({behavior:"smooth",block:"center"}),u.textContent="â¸",v=setInterval(()=>{if(s>0){s--,p();return}clearInterval(v),q(),a==="work"?(g++,g%4===0?(a="longBreak",document.body.classList.add("break"),w(),f(),m(),s=y[l].long*60):(a="shortBreak",document.body.classList.add("break"),w(),f(),m(),s=y[l].short*60)):(a="work",document.body.classList.remove("break"),m(),f(),s=y[l].work*60),p(),d=!1,u.textContent="â–¶",document.body.classList.remove("running"),u.click()},1e3)};B.onclick=()=>{clearInterval(v),d=!1,u.textContent="â–¶",document.body.classList.remove("running"),a="work",m(),f(),document.body.classList.remove("break"),g=0,s=y[l].work*60,p()};let l="standard";document.querySelectorAll(".presets button").forEach(e=>{e.onclick=()=>{d&&(clearInterval(v),d=!1,u.textContent="â–¶",document.body.classList.remove("running")),document.querySelectorAll(".presets button").forEach(t=>t.classList.remove("active")),e.classList.add("active"),l=e.dataset.preset,a="work",document.body.classList.remove("break"),m(),f(),g=0,s=y[l].work*60,p(),document.querySelector(".custom-panel").classList.toggle("hidden",l!=="custom"),l==="custom"&&(s=Number(b.value)*60,p())}});document.querySelectorAll(".modepill").forEach(e=>{e.onclick=()=>{document.querySelectorAll(".modepill").forEach(t=>{t.classList.remove("active"),t.setAttribute("aria-selected","false")}),e.classList.add("active"),e.setAttribute("aria-selected","true"),document.body.setAttribute("data-mode",e.dataset.mode)}});document.querySelectorAll(".vol").forEach(e=>{e.addEventListener("input",()=>{const t=e.dataset.sound,n=Number(e.value)/100;e.style.setProperty("--fill",`${e.value}%`);const c=document.querySelector(`[data-pct="${t}"]`);c&&(c.textContent=`${Math.round(n*100)}%`),i[t].volume=n,n>0&&i[t].paused&&i[t].play().catch(()=>{}),n===0&&i[t].pause()})});document.querySelectorAll(".mute").forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".sounditem"),n=t.querySelector(".vol"),c=n.dataset.sound,o=i[c];if(o.volume>0)n.value=0,o.volume=0,o.pause(),e.textContent="ðŸ”‡";else{n.value=30,o.volume=.3,o.play().catch(()=>{}),e.textContent="ðŸ”Š";const r=t.querySelector(".pct");r&&(r.textContent="30%")}n.style.setProperty("--fill",`${n.value}%`)})});b.addEventListener("input",()=>{l==="custom"&&!d&&(s=Number(b.value)*60,p())});m();p();
